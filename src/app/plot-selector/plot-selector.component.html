<div class="root" fxLayout="column">
  <mat-form-field>
    <mat-label>Example plots location</mat-label>
    <input matInput id="root_url" name="root_url" type="url" required
        #root_url=ngModel [(ngModel)]="plot_file_url">
    <button matSuffix mat-icon-button (click)="updateUrl();">
      <mat-icon>get_app</mat-icon>
    </button>
    <mat-hint>
      URL to a folder containing a <code>list.json</code> file.
    </mat-hint>
    <mat-error *ngIf="root_url.invalid">
      URL is invalid.
    </mat-error>
  </mat-form-field>
  <mat-form-field>
    <mat-label>Load example plot file</mat-label>
    <mat-select #selectedScript (selectionChange)="emitPlotUpdate($event)">
      <mat-option *ngFor="let plot_file of plot_file_list"
          value="{{plot_file}}">
        {{plot_file}}
      </mat-option>
    </mat-select>
    <mat-hint>Reset the code editor to the selected example plot.</mat-hint>
  </mat-form-field>
  <mat-form-field fxFlex>
    <mat-label>Transformation definition</mat-label>
    <textarea matInput #jsonataScript>
{
  "type": "line",
  "data": {
    "labels": [1, 2, 3, 4, 5],
    "datasets": [
      {
        "label": "Red line",
        "data": [1, 4, 9, 16, 25],
        "backgroundColor": "hsl(0,50%,60%)",
        "borderColor": "hsl(0,50%,60%)",
        "fill": false
      },
      {
        "label": "Green line",
        "data": [1, 2, 4, 8, 16],
        "backgroundColor": "hsl(120, 50%, 60%)",
        "borderColor": "hsl(120, 50%, 60%)",
        "fill": false
      }
    ]
  },
  "options": {
    "responsive": true,
    "title": {
      "display": true,
      "text": "My Plot"
    },
    "tooltips": {
      "mode": "index",
      "intersect": true
    },
    "hover": {
      "mode": "nearest",
      "intersect": true
    },
    "scales": {
      "xAxes": [
        {
          "display": true,
          "scaleLabel": {
            "display": true,
            "labelString": "X-label"
          }
        }
      ],
      "yAxes": [
        {
          "display": true,
          "scaleLabel": {
            "display": true,
            "labelString": "Y-label"
          },
          "ticks": {
            "min": 0
          }
        }
      ]
    }
  }
}
    </textarea>
    <button matSuffix mat-button
        (click)="emitJsonataScriptUpdate(jsonataScript)">
      Update plot
    </button>
  </mat-form-field>
</div>
